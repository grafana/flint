{
	"$schema": "https://docs.renovatebot.com/renovate-schema.json",
	"description": "Renovate custom managers for repositories that use flint mise tasks",
	"customManagers": [
		{
			"customType": "regex",
			"description": "Update _VERSION variables in mise.toml",
			"managerFilePatterns": ["/^mise\\.toml$/"],
			"matchStrings": [
				"# renovate: datasource=(?<datasource>[a-z-]+?)(?: depName=(?<depName>.+?))?(?: packageName=(?<packageName>.+?))?(?: versioning=(?<versioning>[a-z-]+?))?\\s.+?_VERSION=\"?(?<currentValue>[^@\"]+?)(?:@(?<currentDigest>sha256:[a-f0-9]+))?\"?\\s"
			]
		},
		{
			"customType": "regex",
			"description": "Update raw.githubusercontent.com URLs pinned to SHA with version comment",
			"managerFilePatterns": ["/^mise\\.toml$/"],
			"matchStrings": [
				"https://raw\\.githubusercontent\\.com/(?<depName>[^/]+/[^/]+)/(?<currentDigest>[a-f0-9]{40})/.*#\\s*(?<currentValue>v\\S+)"
			],
			"datasourceTemplate": "github-tags"
		},
		{
			"customType": "regex",
			"description": "Update mise version in GitHub Actions workflows",
			"managerFilePatterns": [
				"/(^|/)(workflow-templates|\\.(?:github|gitea|forgejo)/(?:workflows|actions))/.+\\.ya?ml$/",
				"/(^|/)action\\.ya?ml$/"
			],
			"datasourceTemplate": "github-release-attachments",
			"packageNameTemplate": "jdx/mise",
			"depNameTemplate": "mise",
			"matchStrings": [
				"jdx/mise-action.*\\n\\s*with:\\s*\\n\\s*version: [\"']?(?<currentValue>v[.\\d]+)[\"']?\\s*\\n\\s*sha256: [\"']?(?<currentDigest>\\w+)[\"']?"
			]
		}
	],
	"packageRules": [
		{
			"matchPackageNames": ["renovate"],
			"description": "Only update renovate once a week",
			"schedule": ["before 6am on Monday"]
		},
		{
			"matchPackageNames": ["jdx/mise"],
			"groupName": "mise",
			"description": "Only update mise once a week",
			"schedule": ["before 4am on Monday"]
		},
		{
			"matchPackageNames": ["ghcr.io/super-linter/super-linter"],
			"matchCurrentValue": "/^slim-/",
			"description": "Use regex versioning for slim Super-Linter tags (slim-v8.4.0)",
			"versioning": "regex:^slim-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$"
		}
	]
}
